plugins {
    id "com.gradle.enterprise" version "3.8"
}

enableFeaturePreview("TYPESAFE_PROJECT_ACCESSORS")
enableFeaturePreview("VERSION_CATALOGS")

Closure discoverSubprojects = {
    fileTree(rootDir) { include("**/build.gradle") }
        .filter { it.parentFile.name != "buildSrc" }
        .collect { rootDir.relativePath(it.parentFile).replace("/",":") }
        .toArray(new String[0])
}

include discoverSubprojects()
